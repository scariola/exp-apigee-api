<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<error-handler
		name="exp-apigee-api_Shared_Error_Handler"
		doc:id="a79cda93-93d0-46f9-8a16-ba23a8c63236">
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="d9d872d4-c501-44f0-87db-add2733d4d76" type="ANY">
			<ee:transform doc:name="Set Payload - any, var-httpStatus" doc:id="db5f79b7-763a-46c8-983e-05401d194ee5">
				<ee:message>
					<ee:set-payload resource="dw/payload-http-any-response.dwl" />
				</ee:message>
				<ee:variables>
					<ee:set-variable resource="dw/var-httpStatus-500.dwl" variableName="httpStatus" />
				</ee:variables>
			</ee:transform>
		</on-error-propagate>
	</error-handler>


	<error-handler
		name="exp-apigee-api_APIKIT_Error_Handler">

		<on-error-propagate type="APIKIT:BAD_REQUEST">
			<ee:transform
				doc:name="Set Payload - Bad Request, var-httpStatus">
				<ee:message>
					<ee:set-payload resource="dw/api-bad-request.dwl" />
				</ee:message>
				<ee:variables>
					<ee:set-variable
						resource="dw/var-httpStatus-400.dwl" variableName="httpStatus" />
				</ee:variables>
			</ee:transform>
		</on-error-propagate>

		<on-error-propagate type="APIKIT:NOT_FOUND">
			<ee:transform
				doc:name="Set Payload - Not Found, var-httpStatus">
				<ee:message>
					<ee:set-payload resource="dw/api-not-found.dwl" />
				</ee:message>
				<ee:variables>
					<ee:set-variable
						resource="dw/var-httpStatus-404.dwl" variableName="httpStatus" />
				</ee:variables>
			</ee:transform>
		</on-error-propagate>

		<on-error-propagate
			type="APIKIT:METHOD_NOT_ALLOWED">
			<ee:transform
				doc:name="Set Payload - Method Not Allowed">
				<ee:message>
					<ee:set-payload
						resource="dw/api-method-not-allowed.dwl" />
				</ee:message>
				<ee:variables>
					<ee:set-variable
						resource="dw/var-httpStatus-405.dwl" variableName="httpStatus" />
				</ee:variables>
			</ee:transform>
		</on-error-propagate>

		<on-error-propagate type="APIKIT:NOT_ACCEPTABLE">
			<ee:transform doc:name="Set  Payload - Not Acceptable">
				<ee:message>
					<ee:set-payload resource="dw/api-not-acceptable.dwl" />
				</ee:message>
				<ee:variables>
					<ee:set-variable
						resource="dw/var-httpStatus-406.dwl" variableName="httpStatus" />
				</ee:variables>
			</ee:transform>
		</on-error-propagate>

		<on-error-propagate
			type="APIKIT:UNSUPPORTED_MEDIA_TYPE">
			<ee:transform
				doc:name="Set Payload - Unsupported Media Type">
				<ee:message>
					<ee:set-payload
						resource="dw/api-unsupported-media-type.dwl" />
				</ee:message>
				<ee:variables>
					<ee:set-variable
						resource="dw/var-httpStatus-415.dwl" variableName="httpStatus" />
				</ee:variables>
			</ee:transform>
		</on-error-propagate>

		<on-error-propagate type="APIKIT:NOT_IMPLEMENTED">
			<ee:transform doc:name="Set Payload - Not Implemented">
				<ee:message>
					<ee:set-payload
						resource="dw/api-not-implemented.dwl" />
				</ee:message>
				<ee:variables>
					<ee:set-variable
						resource="dw/var-httpStatus-501.dwl" variableName="httpStatus" />
				</ee:variables>
			</ee:transform>
		</on-error-propagate>

	</error-handler>
</mule>
